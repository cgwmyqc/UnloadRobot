## 一、电机方向和零部件方向对应关系

大龙门\_左电机\_逆时针————大龙门\_下						大龙门左右电机方向相反

小龙门\_左电机\_逆时针————小龙门_上						小龙门左右电机方向相反 (小龙门升降做反了)

后龙门\_左右电机_逆时针———后龙门\_上						后龙门左右电机方向相同（后龙门反）

左臂\_升电机\_逆时针—————左臂\_下

右臂\_升电机\_逆时针—————右臂_上

腕电机\_逆时针———————腕\_顺时针    				



## 二、通电首次运行注意事项

1、各轴首先要在Twincat里面标定0点。

2、设置软限位。



## 三、左右臂腕关节坐标极限设定

左臂：<X<585		Y<875





## 四、要确定各轴零位标定方法，不然解算不准







## 五、大小龙门需要做取消啮合的逻辑

小龙门右边高5mm



## 六、工控机端口转发

​		工控机一共四个网口，其中两个网口分别连了两个网段，一个网段是百兆网192.168.1.x，百兆网的网关是路由器192.168.1.1；一个网段是千兆网192.168.2.X，设备通过千兆交换机连接。工控机通过端口转发，将百兆网段和千兆网段进行了组网。工控机的千兆网口承担了千兆网网关的作用。

### **1. 网络拓扑**

- **工控机网口分配**：
  - **网口1**：连接百兆网段 `192.168.1.x`，IP地址设为 `192.168.1.102`（与网关 `192.168.1.1` 同网段）。
  - **网口2**：连接千兆网段 `192.168.2.x`，IP地址设为 `192.168.2.1`（作为千兆网段的网关）。
- **目标**：使 `192.168.1.x` 的设备能访问 `192.168.2.x` 的设备。

------

### **2. 配置工控机**

#### **(1) 设置IP地址**

1. **网口1（百兆网段）**：
   - IP地址：`192.168.1.102`（根据实际情况设定）
   - 子网掩码：`255.255.255.0`
   - 网关：`192.168.1.1`（保留原网关，用于访问外网）。
2. **网口2（千兆网段）**：
   - IP地址：`192.168.2.1`
   - 子网掩码：`255.255.255.0`
   - 网关：留空（无需指向外部）。

#### **(2) 启用IP转发**

1. 在工控机以管理员身份打开 **PowerShell**，执行以下命令：

   ```
   Set-ItemProperty -Path HKLM:\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters -Name IpEnableRouter -Value 1
   ```

   这个命令的作用是启用 Windows 系统中的 IP 路由功能。

   具体来说：

   - `Set-ItemProperty` 是 PowerShell 命令，用于设置指定路径下的注册表项的属性值。
   - `HKLM:\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters` 是注册表中的路径，它存储了 TCP/IP 配置的各种参数。
   - `-Name IpEnableRouter` 是指定要修改的注册表项的名称，这里是 `IpEnableRouter`，它控制系统是否启用路由功能。
   - `-Value 1` 将该项的值设置为 `1`，表示启用 IP 路由功能

2. 重启工控机使配置生效。

#### **(3) 配置静态路由**

1. **在工控机上添加路由规则**：

   ```
   route add 192.168.2.0 mask 255.255.255.0 192.168.2.1 -p
   ```

   这条命令是用来在 Windows 系统中添加一个静态路由的，具体的含义如下：

   - `route add`：用于添加一个新的路由条目。
   - `192.168.2.0`：目标网络地址，即要到达的网络。
   - `mask 255.255.255.0`：目标网络的子网掩码，表示目标网络的范围。这里表示一个标准的 Class C 网络，即 192.168.2.0 到 192.168.2.255。
   - `192.168.2.1`：下一跳网关地址，数据包到达目标网络时需要经过的网关。即，当你的计算机要访问 `192.168.2.0` 网络时，会通过 `192.168.2.1` 作为跳转点。
   - `-p`：表示该路由是持久的，也就是说，即使重启计算机，路由条目也会保留，不会被删除。
   - `route print`:命令打印本机路由表
   - `route delete 192.168.2.0`：删除这条路由。

#### **(4) 配置防火墙**

1. 允许跨网段通信：
   - 打开 **控制面板 → Windows Defender 防火墙 → 高级设置**。
   - 创建入站规则：允许 `ICMPv4`（用于 Ping）和所需端口（如TCP/UDP）。

------

### **3. 配置其他设备**

#### **(1) 百兆网段设备（192.168.1.x）**

- **默认网关**：保持为 `192.168.1.1`（原路由器）。

- **添加静态路由**（可选）：
  若工控机需作为中间路由，在设备上添加路由规则：

  ```
  route add 192.168.2.0 mask 255.255.255.0 192.168.1.102 -p
  ```

  - 含义：访问 `192.168.2.x` 的流量通过工控机的百兆网口（IP `192.168.1.102`）转发。

#### **(2) 千兆网段设备（192.168.2.x）**

- **默认网关**：设为 `192.168.2.1`（工控机千兆网口IP），确保返回流量能到达百兆网段。

------

### **4. 测试连通性**

1. **从百兆网段设备 Ping 千兆网段设备**：

   ```
   ping 192.168.2.x
   ```

2. **从千兆网段设备 Ping 百兆网段设备**：

   ```
   ping 192.168.1.x
   ```



## 七、舵轮485通信

转向电机从站地址：1

行走电机从站地址：2

